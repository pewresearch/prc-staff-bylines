(()=>{"use strict";var e,t={331:(e,t,o)=>{const r=window.wp.blocks,s=window.prcComponents,n=window.wp.blockEditor,i=window.React,a=window.wp.apiFetch;var l=o.n(a);const c=window.wp.i18n,f=window.wp.components,p=window.ReactJSXRuntime;function d({staffId:e,setAttributes:t}){return(0,p.jsx)(n.InspectorControls,{children:(0,p.jsx)(f.PanelBody,{title:(0,c.__)("Staff Context Provider"),children:(0,p.jsx)(s.WPEntitySearch,{placeholder:"Search for Staff",searchLabel:"Search for Staff",entityType:"postType",entitySubType:"staff",onSelect:e=>{console.log("Staff: ",e),t({staffSlug:e.slug})},onKeyEnter:()=>{console.log("Enter Key Pressed")},onKeyESC:()=>{console.log("ESC Key Pressed")},perPage:5,showExcerpt:!1})})})}const u=["core/group","core/paragraph","core/button","prc-block/staff-info"],h=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/staff-context-provider","version":"0.1.0","title":"Staff Context Provider","category":"widgets","description":"Provides information about a Staff member via termId and passes that information via block context to its innerblocks.","attributes":{"allowedBlocks":{"type":"array"},"orientation":{"type":"string","default":"vertical"},"staffSlug":{"type":"string"}},"supports":{"anchor":true,"html":false,"interactivity":true},"usesContext":["postId","postType"],"textdomain":"staff-context-provider","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),{name:b}=h,v={edit:function({attributes:e,setAttributes:t,context:o,clientId:r,isSelected:a}){const{allowedBlocks:c,staffSlug:f}=e,{postId:h,postType:b}=o,[v,w]=(0,i.useState)(null);(0,i.useEffect)(()=>{h&&"staff"===b&&w(h);let e="";e=f||"michael-dimock",(async()=>{console.log("fetchStaffId",e),await l()({path:`/wp/v2/staff?slug=${e}&_fields=id`}).then(e=>{e&&e.length&&Object.prototype.hasOwnProperty.call(e[0],"id")?(console.log("...staff...",e),w(e[0].id)):w(null)}).catch(()=>{w(null)})})()},[h,b,f]);const y=(0,i.useMemo)(()=>[{staffId:v}],[v]),g=(0,n.useBlockProps)();return(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(d,{staffId:v,setAttributes:t}),(0,p.jsx)("div",{...g,children:(0,p.jsx)(s.InnerBlocksAsContextTemplate,{clientId:r,allowedBlocks:c||u,blockContexts:y,isResolving:!v})})]})},save:function({attributes:e}){return(0,p.jsx)(n.InnerBlocks.Content,{})}};(0,r.registerBlockType)(b,{...h,...v})}},o={};function r(e){var s=o[e];if(void 0!==s)return s.exports;var n=o[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.m=t,e=[],r.O=(t,o,s,n)=>{if(!o){var i=1/0;for(f=0;f<e.length;f++){for(var[o,s,n]=e[f],a=!0,l=0;l<o.length;l++)(!1&n||i>=n)&&Object.keys(r.O).every(e=>r.O[e](o[l]))?o.splice(l--,1):(a=!1,n<i&&(i=n));if(a){e.splice(f--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var f=e.length;f>0&&e[f-1][2]>n;f--)e[f]=e[f-1];e[f]=[o,s,n]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={88:0,408:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var s,n,[i,a,l]=o,c=0;if(i.some(t=>0!==e[t])){for(s in a)r.o(a,s)&&(r.m[s]=a[s]);if(l)var f=l(r)}for(t&&t(o);c<i.length;c++)n=i[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(f)},o=globalThis.webpackChunk_prc_staff_bylines=globalThis.webpackChunk_prc_staff_bylines||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var s=r.O(void 0,[408],()=>r(331));s=r.O(s)})();
//# sourceMappingURL=index.js.map